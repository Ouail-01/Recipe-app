<div>
  <div>
    <h3>Name:<%= @recipe.name %> </h3>
    <p>Preparation Time: <%= @recipe.preparation_time%> </p>
    <p>Cooking Time:<%= @recipe.cooking_time %> </p>
    <p>Description:<%= @recipe.description %> </p>
  </div>
  <div>
   <% if can? :update, @recipe%>
    <% if @recipe.public %>
      <p>Current Status: Public</p>
      <%= button_to "Change public to private", recipe_path(@recipe), method: :patch%>
    <% else %>
      <p>Current Status: Private</p>
      <%= button_to "Change Private to public", recipe_path(@recipe), method: :patch%>
    <% end %>
   <% end %>
  </div>
</div>

<div>
  <% if can? :update, @recipe%>
    <%= link_to "Generate Shopping List" %>
    <%= link_to "Add Ingredient", new_recipe_recipe_food_path(@recipe.id) %>
  <%end%>
</div>

<table>
  <thead>
    <tr>
      <th scope="col">Food</th>
      <th scope="col">Quantity</th>
      <th scope="col">Value</th>
      <th scope="col">Actions</th>
    </tr>
  </thead>
    <tbody>
    <% @recipe.recipe_foods.each do |ingredient|%>
      <tr>
          <td><%= ingredient.food.name %></td>
          <td><%= ingredient.quantity%> <%= ingredient.food.measurement_unit %></td>
          <td>$ <%= ingredient.food.price %></td>
          <td>
          <% if can? :update, @recipe%>
            <%= link_to "Modify", edit_recipe_recipe_food_path(recipe_id: @recipe.id, id: ingredient.id) %>
            <%= button_to "Remove", recipe_recipe_food_path(recipe_id: @recipe.id, id: ingredient.id), method: :delete %>
          <%else%>
            <p>Action not allowed</p>
          <%end%>
          </td>
      </tr>
    <% end %>
    </tbody>
    </table>
    <%= link_to 'Add Food', new_recipe_recipe_food_path(@recipe.id), class: 'add-food-link' %>
